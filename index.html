<html>
<head>
<meta charset='UTF-8' />
<link rel="stylesheet" type="text/css" href="main.css" />
<link href="https://fonts.googleapis.com/css?family=Raleway:100,100i,300,300i,400,400i,700,700i,900,900i" rel="stylesheet">
<script src="https://d3js.org/d3.v4.min.js" charset="utf-8"></script>
<script src="https://d3js.org/d3-selection-multi.v1.min.js"></script>
<!-- <script src="jquery-1.5.js"></script> -->
<!-- <script src="functions.js"></script> -->

<style>

.arc text {
	font: 20px sans-serif;
	/*text-anchor: middle;*/
	fill:black;
}

.arc path {
	stroke: #fff;
}

.arc path:hover {
	fill-opacity: .7;
	cursor: pointer;
}

#rs text {
	stroke: black;
	font-size: 30;
	alignment-baseline: middle;
}

#rs rect:hover {
	stroke: white;
	stroke-width: 3;
}

#diversebuttons{
	padding-left: 350px;
	padding-top: 40px;
}

#redSlider, #blueSlider {
	width: 260px;
}

#curvepath{
	fill: none;
	stroke-width: 2px;
}

</style>
</head>
<body>

<div id="header">
<h1> Giving Bias A Platform </h1>
<h2> Designing Against Bias & Discrimination In User-to-User Platforms</h2>
</div>

<div id="subheader">
<p> The goal of the project is to document a range of design strategies that platforms can use to mediate interactions between their users, specifically with respect to addressing the effects of implicit/explicit bias in interactions. By restructuring information flows within exchanges (e.g., by limiting visible information about a transacting party; by highlighting or reframing information via dynamic UI; by requiring more user input in certain situations), platforms can use design strategies to mitigate against biased decision-making by users that may result, in aggregate, in systemic discrimination against certain protected groups. </p>

</div>

	<div id="navwrap">
		<div id="nav">
			<a href="#company" class="button">Company-Level Diversity & Inclusion</a>
			<a href="#composition" class="button">Community Composition</a>
			<a href="#policies" class="button">Community Policies & Messaging </a>
			<a href="#prompting" class="button">Prompting & Priming</a>
			<a href="#howlearn" class="button">How Users Learn About One Another</a>
		</div>
		<div id="nav">
			<a href="#whatlearn" class="button">What User Learn About One Another </a>
			<a href="#reputation" class="button">Reputation, Reliability & Ratings</a>
			<a href="#data" class="button">Data Quality & Validation</a>
			<a href="#reporting" class="button">Reporting & Sanctioning </a>
			<a href="#measurement" class="button">Measurement & Detection </a>
		</div>
	</div>
<div id="bar"></div>
<div id="page-wrap">

	<div id="page1" class="slide">
		<a name="company"></a>
		<h1> Company-Level Diversity & Inclusion </h1>
		<div class="page-padding"></div>

		<h2>Diversity of Apple, Facebook, and Google's Technical Workforce</h2>
		<div id="diversebuttons">
			<a class="button" onclick="showGender()">Gender</a>
			<a class="button" onclick="showRace()">Ethnicity </a>
		</div>

<svg id="diversity" width="960" height="500"></svg>

	<script>
	//with help from https://bl.ocks.org/mbostock/3887235

	function showGender(){
		d3.select("#race").attr("display", "none");
		d3.select("#gender").attr("display", "inline");
	}
	function showRace(){
		d3.select("#gender").attr("display", "none");
		d3.select("#race").attr("display", "inline");
	}

	var diversity = d3.select("#diversity"),
	    width = +diversity.attr("width"),
	    height = +diversity.attr("height"),
	    radius = Math.min(width, height) / 2;

	var racecolor = ["#5DA5DA", "#60BD68", "#FAA43A", "#F17CB0", "#B276B2", "#DECF3F", "#ff8c00"];
	var color = d3.scaleOrdinal(racecolor);
	var gendercolor = d3.scaleOrdinal(["#60BD68","#DECF3F"]);

	var pie = d3.pie()
	    .sort(null)
	    .value(function(d) { return d.Percentage; });

	var path = d3.arc()
	    .outerRadius(radius - 100)
	    .innerRadius(0);

	var label = d3.arc()
	    .outerRadius(radius-40)
	    .innerRadius(0);

	//overall svg for race pie charts
	var race = diversity.append("g").attr("id", "race");

	//make apple race pie chart
	var appleethnic = race.append("g").attr("transform", "translate(" + width / 6 + "," + height / 2 + ")");

	d3.csv("corporate/appleethnicdata.csv", function(d) {
	  d.Percentage = +d.Percentage;
	  return d;
	}, function(error, data) {
	  if (error) throw error;

	  var arc = appleethnic.selectAll(".arc")
	    .data(pie(data))
	    .enter().append("g")
	      .attr("class", "arc");

	  arc.append("path")
	      .attr("d", path)
	      .attr("fill", function(d) { return color(d.data.Race); });

	  arc.append("text")
	      .attr("transform", function(d) {
					return "translate(" + label.centroid(d) + ")"; })
	      .attr("dy", "0.35em")
	      .text(function(d) { return d.data.Percentage + "%"; });
	});

	//make google race pie chart
	var googleethnic = race.append("g").attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

	d3.csv("corporate/googleethnicdata.csv", function(d) {
	  d.Percentage = +d.Percentage;
	  return d;
	}, function(error, data) {
	  if (error) throw error;

	  var arc = googleethnic.selectAll(".arc")
	    .data(pie(data))
	    .enter().append("g")
	      .attr("class", "arc");

	  arc.append("path")
	      .attr("d", path)
	      .attr("fill", function(d) { return color(d.data.Race); });

	  arc.append("text")
	      .attr("transform", function(d) { return "translate(" + label.centroid(d) + ")"; })
	      .attr("dy", "0.35em")
	      .text(function(d) { return d.data.Percentage + "%"; });
	});

	//make facebook race pie chart
	var facebookethnic = race.append("g").attr("transform", "translate(" + width / 1.2 + "," + height / 2 + ")");

	d3.csv("corporate/facebookethnicdata.csv", function(d) {
	  d.Percentage = +d.Percentage;
	  return d;
	}, function(error, data) {
	  if (error) throw error;

	  var arc = facebookethnic.selectAll(".arc")
	    .data(pie(data))
	    .enter().append("g")
	      .attr("class", "arc");

	  arc.append("path")
	      .attr("d", path)
	      .attr("fill", function(d) { return color(d.data.Race); });

	  arc.append("text")
	      .attr("transform", function(d) { return "translate(" + label.centroid(d) + ")"; })
	      .attr("dy", "0.35em")
	      .text(function(d) { return d.data.Percentage + "%"; });
	});

	race.append("text")
	 .attrs({x:160, y: 60, fill: "black"})
		.text("Apple");
	race.append("text")
		.attrs({x:450, y: 60, fill: "black"})
		.text("Facebook");
	race.append("text")
		.attrs({x:740, y: 60, fill: "black"})
		.text("Google");


	//make overall group for appending gender data
	var gender = diversity.append("g").attr("id", "gender").attr("display", "none");

	///Apple Gender data
	var applegender = gender.append("g").attr("transform", "translate(" + width / 6 + "," + height / 2 + ")");

	d3.csv("corporate/applegenderdata.csv", function(d) {
	  d.Percentage = +d.Percentage;
	  return d;
	}, function(error, data) {
	  if (error) throw error;

	  var arc = applegender.selectAll(".arc")
	    .data(pie(data))
	    .enter().append("g")
	      .attr("class", "arc");

	  arc.append("path")
	      .attr("d", path)
	      .attr("fill", function(d) { return gendercolor(d.data.Gender); });

	  arc.append("text")
	      .attr("transform", function(d) { return "translate(" + label.centroid(d) + ")"; })
	      .attr("dy", "0.35em")
	      .text(function(d) { return d.data.Percentage + "%"; });
	});


	///Facebook Gender data
	var facebookgender = gender.append("g").attr("transform", "translate(" + width / 1.2 + "," + height / 2 + ")");

	d3.csv("corporate/facebookgenderdata.csv", function(d) {
	  d.Percentage = +d.Percentage;
	  return d;
	}, function(error, data) {
	  if (error) throw error;

	  var arc = facebookgender.selectAll(".arc")
	    .data(pie(data))
	    .enter().append("g")
	      .attr("class", "arc");

	  arc.append("path")
	      .attr("d", path)
	      .attr("fill", function(d) { return gendercolor(d.data.Gender); });

	  arc.append("text")
	      .attr("transform", function(d) { return "translate(" + label.centroid(d) + ")"; })
	      .attr("dy", "0.35em")
	      .text(function(d) { return d.data.Percentage + "%"; });
	});


	////Google Gender data
	var googlegender = gender.append("g").attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

	d3.csv("corporate/googlegenderdata.csv", function(d) {
	  d.Percentage = +d.Percentage;
	  return d;
	}, function(error, data) {
	  if (error) throw error;

	  var arc = googlegender.selectAll(".arc")
	    .data(pie(data))
	    .enter().append("g")
	      .attr("class", "arc");

	  arc.append("path")
	      .attr("d", path)
	      .attr("fill", function(d) { return gendercolor(d.data.Gender); });

	  arc.append("text")
	      .attr("transform", function(d) { return "translate(" + label.centroid(d) + ")"; })
	      .attr("dy", "0.35em")
	      .text(function(d) { return d.data.Percentage + "%"; });
	});

	gender.append("text")
	 .attrs({x:160, y: 80, stroke: "black"})
		.text("Apple");
	gender.append("text")
		.attrs({x:450, y: 80, stroke: "black"})
		.text("Facebook");
	gender.append("text")
		.attrs({x:740, y: 80, stroke: "black"})
		.text("Google");

	</script>

		<p>Some companies seek to address bias on platforms by reforming the company itself (i.e., its organizational makeup and internal policies). Platform companies may seek to increase the representation of underrepresented groups, may offer training to their engineering teams and other members of their workforce about implicit bias and its effects, and may devote additional personnel and internal resources to the elimination of bias. These strategies assume a sort of “trickle-down” approach to bias mitigation: the presence of more diverse company personnel and explicit training about the problem of implicit bias may attune companies to disparate effects of their design decisions that might not have come to the fore otherwise.</p>
	</div> <!--END page1-->

	<div id="page2" class="slide">
		<a name="composition"></a>
		<h1> Community Composition </h1>
		<div class="page-padding"></div>
		<svg id="community" height="600" width="1000"></svg>
	<script>
	var community = d3.select("#community");

	/// category text

	community.append("text")
		.attr("x", 190)
		.attr("y", 45)
		.attr("fill", "black")
		.text("Dating Apps");

	community.append("text")
		.attr("x", 640)
		.attr("y", 45)
		.attr("fill", "black")
		.text("Community Requirements");


	///Community Circles

	community.append("circle")
				.attr("id","circle")
				.attr("r",35)
				.attr("cx", 750)
				.attr("cy", 100)
				.attr("fill", "#5DA5DA");

	community.append("circle")
				.attr("id","circle")
				.attr("r",35)
				.attr("cx", 750)
				.attr("cy", 200)
				.attr("fill", "#60BD68");

	community.append("circle")
				.attr("id","circle")
				.attr("r",35)
				.attr("cx", 750)
				.attr("cy", 300)
				.attr("fill", "#FAA43A");


	community.append("circle")
				.attr("id","circle")
				.attr("r",35)
				.attr("cx", 750)
				.attr("cy", 400)
				.attr("fill", "#F17CB0");

	community.append("circle")
				.attr("id","circle")
				.attr("r",35)
				.attr("cx", 750)
				.attr("cy", 500)
				.attr("fill", "#B276B2");

	////images

	community.append("image")
				.attr("xlink:href", "vis2/bumble.png")
				.attr("x", 705)
				.attr("y", 205)
				.attr("transform","scale(.3)");

	community.append("image")
				.attr("xlink:href", "vis2/jswipe.png")
				.attr("x", 705)
				.attr("y", 530)
				.attr("transform","scale(.3)");

	community.append("image")
				.attr("xlink:href", "vis2/tinder.png")
				.attr("x", 705)
				.attr("y", 865)
				.attr("transform","scale(.3)");

	community.append("image")
				.attr("xlink:href", "vis2/league.png")
				.attr("x", 2250)
				.attr("y", 3735)
				.attr("transform","scale(.1)");

	community.append("image")
				.attr("xlink:href", "vis2/grindr.png")
				.attr("x", 705)
				.attr("y", 1565)
				.attr("transform","scale(.3)");
	///Text for circles

	community.append("text")
		.attr("x", 830)
		.attr("y", 105)
		.attr("fill", "black")
		.text("Location");

	community.append("text")
		.attr("x", 830)
		.attr("y", 205)
		.attr("fill", "black")
		.text("Gender");

	community.append("text")
		.attr("x", 830)
		.attr("y", 305)
		.attr("fill", "black")
		.text("Social Media Account");

	community.append("text")
		.attr("x", 830)
		.attr("y", 405)
		.attr("fill", "black")
		.text("Religion");

	community.append("text")
		.attr("x", 830)
		.attr("y", 505)
		.attr("fill", "black")
		.text("Education");





	///text for images

	community.append("text")
		.attr("x", 100)
		.attr("y", 105)
		.attr("fill", "black")
		.text("Bumble");

	community.append("text")
		.attr("x", 100)
		.attr("y", 205)
		.attr("fill", "black")
		.text("Jswipe");

	community.append("text")
		.attr("x", 100)
		.attr("y", 305)
		.attr("fill", "black")
		.text("Tinder");

	community.append("text")
		.attr("x", 100)
		.attr("y", 405)
		.attr("fill", "black")
		.text("The League");

	community.append("text")
		.attr("x", 100)
		.attr("y", 505)
		.attr("fill", "black")
		.text("Grindr");


	///lines connecting apps to community structure

	///Bumble
	community.append("line")
			.attr("stroke", "black")
			.attr("stroke-width", "4")
			.attr("id", "bumblelocation")
			.attr("x1", 288)
			.attr("y1", 100)
			.attr("x2", 716)
			.attr("y2", 100);

	community.append("line")
			.attr("stroke", "black")
			.attr("stroke-width", "4")
			.attr("id", "bumblefacebook")
			.attr("x1", 288)
			.attr("y1", 100)
			.attr("x2", 716)
			.attr("y2", 300);

	///Jswipe
	community.append("line")
			.attr("stroke", "black")
			.attr("stroke-width", "4")
			.attr("id", "jswipelocation")
			.attr("x1", 269)
			.attr("y1", 200)
			.attr("x2", 716)
			.attr("y2", 100);

	community.append("line")
			.attr("stroke", "black")
			.attr("stroke-width", "4")
			.attr("id", "jswipefacebook")
			.attr("x1", 269)
			.attr("y1", 200)
			.attr("x2", 716)
			.attr("y2", 300);

	community.append("line")
			.attr("stroke", "black")
			.attr("stroke-width", "4")
			.attr("id", "jswipejewish")
			.attr("x1", 269)
			.attr("y1", 200)
			.attr("x2", 716)
			.attr("y2", 400);

	///tinder
	community.append("line")
			.attr("stroke", "black")
			.attr("stroke-width", "4")
			.attr("id", "tinderlocation")
			.attr("x1", 288)
			.attr("y1", 300)
			.attr("x2", 716)
			.attr("y2", 100);

	community.append("line")
			.attr("stroke", "black")
			.attr("stroke-width", "4")
			.attr("id", "tinderfacebook")
			.attr("x1", 288)
			.attr("y1", 300)
			.attr("x2", 716)
			.attr("y2", 300);

	///the league
	community.append("line")
			.attr("stroke", "black")
			.attr("stroke-width", "4")
			.attr("id", "leaguelocation")
			.attr("x1", 275)
			.attr("y1", 400)
			.attr("x2", 716)
			.attr("y2", 100);

	community.append("line")
			.attr("stroke", "black")
			.attr("stroke-width", "4")
			.attr("id", "leaguefacebook")
			.attr("x1", 275)
			.attr("y1", 400)
			.attr("x2", 716)
			.attr("y2", 500);

	community.append("line")
			.attr("stroke", "black")
			.attr("stroke-width", "4")
			.attr("id", "leagueivyleague")
			.attr("x1", 275)
			.attr("y1", 400)
			.attr("x2", 716)
			.attr("y2", 300);



	///grindr

	community.append("line")
			.attr("stroke", "black")
			.attr("stroke-width", "4")
			.attr("x1", 279)
			.attr("y1", 500)
			.attr("x2", 716)
			.attr("y2", 100);

	community.append("line")
			.attr("stroke", "black")
			.attr("stroke-width", "4")
			.attr("x1", 279)
			.attr("y1", 500)
			.attr("x2", 716)
			.attr("y2", 200);

		// d3.json("vis2/vis2.json", function(error, data) {
		// 	console.log(data);
		//
		// 	var community = d3.select("#community");
		//
		// 	var applist = ["bumble", "jswipe", "tinder", "league", "grindr"];
		// 	var colors = ["#5DA5DA", "#60BD68", "#FAA43A", "#F17CB0", "#B276B2"];
		// 	for(var i=0; i<applist.length; i++){
		// 		community.append("image")
		// 			.attr("xlink:href", applist[i] + ".png")
		// 			.attr("x")
		// 	}
		// 	community.selectAll("image").data(data).enter().append("image")
		// 		.attr("xlink:href", )
		//
		// });

	</script>

		<p>Platforms may implement rules or expectations about the characteristics members must meet in order to be included in the pool of users. Such restrictions may be based on membership in a demographic category, geographic proximity, shared professions or interests, or other limitations—and may be enforced through self-selection, norm formation, credentialing, invitation, or independent vetting. Restricting access may help to cultivate a baseline level of affinity, homogeneity, connection, or trust among users that may militate against bias in their interactions. In particular, users may refrain from reliance on stereotypes about secondary characteristics because negative associations based on those characteristics are neutralized by membership on the platform (and the associated characteristics it imparts). At the same time, understanding a platform to be “exclusive” in some way may have the opposite effect by encouraging biased judgments: it may embolden users to rely even more upon stereotypes in their interactions on the platform, potentially based on the normalization of stereotyping behaviors or extensive focus on elitism.</p>

	</div> <!--END page2-->

	<div id="page3" class="slide">
		<a name="policies"></a>
		<h1> Community Policies & Messaging </h1>
		<div class="page-padding"></div>


		<p>Community guidelines and terms of use may explicitly caution users against interacting on the platform in ways that exhibit bias against other users. Some platforms style such policies as “commitments” or “pledges” and incentivize or require users to engage directly with them; others require platform members to complete training on unconscious bias. Community guidelines may serve to cultivate norms for behavior on a platform, and also can establish bases for imposing sanctions if those norms are violated. Community policies can also be communicated less directly through messaging and imagery both on and off the platform, including site text/imagery and external advertising.</p>
	</div> <!--END page3-->

	<div id="page4" class="slide">
		<a name="prompting"></a>
		<h1> Prompting & Priming </h1>
		<div class="page-padding"></div>
		<p>Platforms may use “just-in-time” prompts to induce users to reflect on their behavior during a site interaction, often by providing users with interstitial information or a pop-up dialog that must be acceded to before proceeding with a communication or transaction. These measures may remind users to abide by community guidelines to which they have previously agreed, hence making anti-bias commitments more top-of-mind. Such prompts may be triggered to appear only when likely biased behavior is detected, by default for all interactions, or when some other conditions are met.</p>
	</div> <!--END page1-->

	<div id="page5" class="slide">
		<a name="howlearn"></a>
		<h1> How Users Learn About One Another </h1>
		<div class="page-padding"></div>
		<p>Platforms often function like markets, helping supply find demand—and vice versa. But platforms employ a wide range of techniques to facilitate this process. Some assume a more passive role in matching supply and demand (leaving a good deal of the process of finding an appropriate partner to the transacting parties themselves) while others take a more active role (automating much of the process of pairing riders and drivers, for example). Some provide users with tools to search and sort; others provide users with their own recommendations. In many cases, the marketplace that users confront on these platforms is a rank ordered list, of which platforms cannot help but play a crucial part. By necessity, platforms scaffold the process by which users find one another, and different design choices can leave greater or less leeway for users to exercise prejudicial or biased preferences.</p>
	</div> <!--END page2-->

	<div id="page6" class="slide">
		<a name="whatlearn"></a>
		<h1> What Users Learn About One Another </h1>
		<div class="page-padding"></div>
		<p>
In offline interactions, indicators of identity, reputation, and personality can be gleaned from a variety of sources. But in platform-mediated interactions, users generally know about one another based on the information provided on the platform. Platforms may encourage (or require) users to present personal information about themselves via profiles, photographs, predefined fields, or other means; conversely, they may purposively withhold personal information during a transaction, or discretize how such information is presented. Platforms may also authenticate users’ identities by linking them to external sources or by requiring users to use their real names on the platform. Information that leads users to see a counterparty as a “whole person” might lead them to rely less on discrete signals (gender, ethnicity, etc.) in choosing with whom to transact, and can provide the opportunity for counterstereotypical signals to be presented; however, user information (perhaps particularly photographs and names) can also introduce additional information upon which people may make biased judgments. In addition, well-intentioned limitations on information collection may sometimes have unanticipated detrimental consequences, by leading counterparties to fall back on available information that they assume to be correlated with withheld characteristics.</p>
	</div> <!--END page3-->
	<div id="page7" class="slide">
		<a name="reputation"></a>
		<h1> Reputation, Reliability & Ratings </h1>
		<div class="page-padding"></div>
		<p>Another set of platform strategies aim to equip users with information about what to expect from a transacting partner on the site—how reliable and trustworthy she can be expected to be, and how she can be expected to behave—based on indicators derived from past behavior. These indicators can confer a sense of expertise, reputation, or trustworthiness that may increase counterparties’ trust in the exchange—perhaps mitigating biases based on countervailing signals—and often take the form of badges or other graphic elements on users’ profiles. Similarly, testimonials, reviews, and ratings serve as signals of reliability—though the act of evaluation may itself operate as a conduit for bias.</p>
	</div> <!--END page1-->

	<div id="page8" class="slide">
		<a name="data"></a>
		<h1> Data Quality & Validation </h1>
		<div class="page-padding"></div>
		<p>Users commonly provide feedback on each others’ performance in the course of using a platform—by rating one another, leaving reviews on past transactions, and the like. Though such activity can provide a basis for trust and reliability with unknown partners, it is also likely to be inflected by users’ implicit biases, and may therefore result in systematically worse outcomes for users from marginalized groups. To ameliorate these effects, platforms may seek to improve the quality of evaluations that users tender to one another on a platform. They may do this by requiring more granular information of users in suspect cases, in efforts to make users reflect more precisely on the attributes of a past transaction. They may also mitigate the effects of bias (if not bias itself) by adjusting ratings or de-listing reviews likely to be impacted by bias, perhaps using machine learning techniques to detect high- or low-quality evaluations. Finally, platforms may require validation of poor evaluations with external sources of data.</p>
	</div> <!--END page2-->

	<div id="page9" class="slide">
		<a name="reporting"></a>
		<h1> Reporting & Sanctioning </h1>
		<div class="page-padding"></div>
		<h2> Reporting Bias: A <i>Choose Your Own Adventure</i> Game </h2>

<svg id="rs" width="960" height="500"></svg>

		<script>
		var rs = d3.select("#rs");

		function next(here, next){
			d3.select(here).attr("display", "none");
			d3.select(next).attr("display", "inline");
		}

		//START SET
		var s0 = rs.append("g").attr("id", "s0");
		s0.append("rect")
			.attrs({width: 960, height: 500, fill: "LightSteelBlue"});
		s0.append("rect")
			.attrs({height: 60, width: 320, x: 320, y: 200, fill: "wheat"})
			.on("click", function(){ next("#s0", "#s1"); });
		s0.append("text")
			.attrs({x: 470, y: 230 })
			.attr("text-anchor", "middle")
			.text("Click here to start.")
			.on("click", function(){ next("#s0", "#s1"); });


		//STEP 1: YOU SEE BIAS, WHAT DO YOU DO??
		var s1 = rs.append("g").attr("id", "s1").attr("display", "none");
		s1.append("rect")
			.attrs({width: 960, height: 500, fill: "LightSteelBlue"});

		s1.append("image")
			.attr("xlink:href", "cya/bad.jpeg")
			.attrs({x: 40, y: 100})
			.attr("transform", "scale(1.5)");

		var text1 = ["You log into your favorite sharing economy site.", "You see a user treating another user poorly because of their race.", "What do you do?"];
		for(var i=0; i<text1.length; i++){
			s1.append("text")
				.attrs({ x: 50, y: 50+ (35*i)})
				.text(text1[i]);
			}
		s1.append("rect")
			.on("click", function(){ next("#s1", "#e1"); })
			.attrs({x:600, y:150, height: 60, width: 320, fill: "wheat"});
		s1.append("text")
			.on("click", function(){ next("#s1", "#e1"); })
			.attrs({x:620, y:180 })
			.text("Do Nothing.")

		s1.append("rect")
			.on("click", function(){ next("#s1", "#s2"); })
			.attrs({x:600, y: 250, height: 60, width: 320, fill:"wheat"});
		s1.append("text")
			.on("click", function(){ next("#s1", "#s2"); })
			.attrs({x:620, y: 280 })
			.text("Report the behavior!");


		//STEP 1, YOU HAVE CHOSEN NOT TO REPORT, YOU LOSE
		var e1 = rs.append("g").attr("id", "e1").attr("display", "none");
		e1.append("rect")
			.attrs({width: 960, height: 500, fill: "LightSteelBlue"});
		var text1_2 = ["You let someone get away with discrimination!", "Sorry, you lose the game.", "Make better choices next time!"];

		e1.append("image")
			.attr("xlink:href", "cya/try.jpg")
			.attrs({x: 70, y: 250})
			.attr("transform", "scale(0.6)");

		for(var i=0; i<text1_2.length; i++){
			e1.append("text")
				.attrs({ x: 50, y: 50+ (35*i)})
				.text(text1_2[i]);
			}
		e1.append("rect")
			.attrs({height: 60, width: 320, x: 350, y: 200, fill: "wheat"})
			.on("click", function(){ next("#e1", "#s0"); });
		e1.append("text")
			.attrs({x: 370, y: 230 })
			.text("Restart the game.")
			.on("click", function(){ next("#e1", "#s0"); });


		//STEP 2, YOU CHOOSE TO REPORT, WHAT HAPPENS?
		var s2 = rs.append("g").attr("id", "s2").attr("display", "none");
		s2.append("rect")
			.attrs({width: 960, height: 500, fill: "LightSteelBlue"});

		s2.append("image")
			.attr("xlink:href", "cya/youplatform.jpg")
			.attrs({x: 40, y: 100})
			.attr("transform", "scale(0.8)");

		s2.append("text")
			.attrs({x: 40, y:40})
			.text("You chose to click the report button.")

		var text2 = ["Oh, no!", "There's no option to report that behavior.", "What do you do?"];
		for(var i=0; i<text2.length; i++){
			s2.append("text")
				.attrs({ x: 350, y: 90+ (35*i)})
				.text(text2[i]);
			}
		s2.append("rect")
			.on("click", function(){ next("#s2", "#e1"); })
			.attrs({x:350, y:200, height: 60, width: 500, fill: "wheat"});
		s2.append("text")
			.on("click", function(){ next("#s2", "#e1"); })
			.attrs({x:370, y:230 })
			.attr("alignment-baseline", "middle")
			.text("Don't report anything.");

		s2.append("rect")
			.on("click", function(){ next("#s2", "#s3_2"); })
			.attrs({x:350, y: 300, height: 60, width: 500, fill:"wheat"});
		s2.append("text")
			.on("click", function(){ next("#s2", "#s3_2"); })
			.attrs({x:370, y: 330 })
			.attr("alignment-baseline", "middle")
			.text("Report them for something else.");

		s2.append("rect")
			.on("click", function(){ next("#s2", "#s3_1"); })
			.attrs({x:350, y: 400, height: 60, width: 500, fill:"wheat"});
		s2.append("text")
			.on("click", function(){ next("#s2", "#s3_1"); })
			.attrs({x:370, y: 430 })
			.attr("alignment-baseline", "middle")
			.text("Contact the company to complain.");


		//STEP 3_1, YOU HAVE CHOSEN TO COMPLAIN TO THE COMPANY
		var s3_1 = rs.append("g").attr("id", "s3_1").attr("display", "none");
		s3_1.append("rect")
			.attrs({width: 960, height: 500, fill: "LightSteelBlue"});

		s3_1.append("image")
			.attr("xlink:href", "cya/ban.jpg")
			.attrs({x: 40, y: 200});

		var text3_1 = ["Great job!", "The biased user has been banned from the platform.", "What do you do next?"];
		for(var i=0; i<text3_1.length; i++){
			s3_1.append("text")
				.attrs({ x: 40, y: 50+ (35*i)})
				.text(text3_1[i]);
			}
		s3_1.append("rect")
			.on("click", function(){ next("#s3_1", "#s4_2"); })
			.attrs({x:520, y:200, height: 60, width: 360, fill: "wheat"});
		s3_1.append("text")
			.on("click", function(){ next("#s3_1", "#s4_2"); })
			.attrs({x:540, y:230 })
			.attr("alignment-baseline", "middle")
			.text("Do nothing more.")

		s3_1.append("rect")
			.on("click", function(){ next("#s3_1", "#s4_1"); })
			.attrs({x: 520, y: 300, height: 60, width:360, fill:"wheat"});
		s3_1.append("text")
			.on("click", function(){ next("#s3_1", "#s4_1"); })
			.attrs({ x:540, y: 330 })
			.attr("alignment-baseline", "middle")
			.text("Ask for better reporting.");


		//STEP 3_2, YOU HAVE CHOSEN TO REPORT A DIFFERENT BEHAVIOR
		var s3_2 = rs.append("g").attr("id", "s3_2").attr("display", "none");
		s3_2.append("rect")
			.attrs({width: 960, height: 500, fill: "LightSteelBlue"});

		s3_2.append("image")
			.attr("xlink:href", "cya/tos.jpg")
			.attrs({x: 70, y: 350})
			.attr("transform", "scale(0.45)");

		var text3_2 = ["You reported someone for something they didn't actually do!", "This is a violation of the platform's terms of service.", "You have been removed from the platform for bad behavior."];
		for(var i=0; i<text3_2.length; i++){
			s3_2.append("text")
				.attrs({ x: 40, y: 40+ (35*i) })
				.text(text3_2[i]);
			}
		s3_2.append("rect")
			.on("click", function(){ next("#s3_2", "#s0"); })
			.attrs({x:500, y:200, height: 60, width: 320, fill: "wheat"});
		s3_2.append("text")
			.on("click", function(){ next("#s3_2", "#s0"); })
			.attrs({ x:520, y:230 })
			.attr("alignment-baseline", "middle")
			.text("Restart the game.");


		//STEP 4_1, YOU HAVE CHOSEN TO COMPLAIN MORE
		var s4_1 = rs.append("g").attr("id", "s4_1").attr("display", "none");
		s4_1.append("rect")
			.attrs({width: 960, height: 500, fill: "LightSteelBlue"});

		s4_1.append("image")
			.attr("xlink:href", "cya/congrats.jpg")
			.attrs({x: 50, y: 240})
			.attr("transform", "scale(0.7)");

		var text4_1 = ["The company has added the option to report bias!", "You've made the experience better for everyone.", "You have won the game! Great job!"];
		for(var i=0; i<text4_1.length; i++){
			s4_1.append("text")
				.attrs({ x: 40, y: 50+ (35*i) })
				.text(text4_1[i]);
			}
		s4_1.append("rect")
			.on("click", function(){ next("#s4_1", "#s0"); })
			.attrs({x: 500, y: 250, height: 60, width: 320, fill: "wheat"});
		s4_1.append("text")
			.on("click", function(){ next("#s4_1", "#s0"); })
			.attrs({ x:520, y: 280 })
			.attr("alignment-baseline", "middle")
			.text("Play Again!");


		//STEP 4_2 YOU HAVE CHOSEN TO DO NOTHING MORE
		var s4_2 = rs.append("g").attr("id", "s4_2").attr("display", "none");
		s4_2.append("rect")
			.attrs({width: 960, height: 500, fill: "LightSteelBlue"});

		s4_2.append("image")
			.attr("xlink:href", "cya/try.jpg")
			.attrs({x: 50, y: 170})
			.attr("transform", "scale(0.7)");

		var text4_2 = ["You stopped one biased person, but the problem could recur.", "Try advocating for structural change next time."];
		for(var i=0; i<text4_2.length; i++){
			s4_2.append("text")
				.attrs({ x: 40, y: 50+ (35*i) })
				.text(text4_2[i]);
			}
		s4_2.append("rect")
			.on("click", function(){ next("#s4_2", "#s0"); })
			.attrs({x: 500, y: 250, height: 60, width: 320, fill: "wheat"});
		s4_2.append("text")
			.on("click", function(){ next("#s4_2", "#s0"); })
			.attrs({ x:520, y:280 })
			.attr("alignment-baseline", "middle")
			.text("Restart the game.");


		</script>
</div> <!--END page3-->
<div id="page10" class="slide">
	<a name="measurement"></a>
	<h1> Measurement & Detection </h1>
	<div class="page-padding"></div>
	<p>People are known to rate others from their own subgroups better than they do people from other groups. Try adjusting the number of people in the blue group and red group to see how the overall ratings for each group changes. </p>
	<p>Blue Raters: 10<input id="blueSlider" type="range" min="10" max="200" value="50" oninput="updateNums(value, redSlider.value)">200
	&nbsp;&nbsp;&nbsp;Red Raters:  10<input id="redSlider" type="range" min="10" max="200" value="50" oninput="updateNums(blueSlider.value, value)">200</p>
	<p><div id="blueRaters"></div><div id="redRaters"></div></p>
	<svg id = "md" width="960" height="500"></svg>
	<script>
	var md = d3.select("#md");


	md.append("text").attrs({x: 20, y: 150, stroke:"black"}).text("Ratings of Blue");
	md.append("text").attrs({x: 20, y: 300, stroke:"black"}).text("Ratings of Red");

	var xScale = d3.scaleLinear().range([150, 750]);
	var curveXScale = d3.scaleLinear().range([150, 750]);
	var yScale = d3.scaleLinear();
	var min = 0;
	var max = 0;

	function updateNums(blue, red){

		d3.selectAll(".md").remove();

		red = Number(red);
		blue = Number(blue);
		document.getElementById("blueRaters").innerHTML = "" + blue;
		document.getElementById("redRaters").innerHTML = "" + red;

		//n = number of raters (points), mu = mean, sigma = SD, y = point y location, id = point/set id, c = point color
		var blueOwn = make(blue, 4, 1, 150, "bb", "blue");//own dist
		var redBlue = make(red, 2.5, 1.5, 150, "rb", "red");//other
		var blueRed = make(blue, 2.5, 1.5, 300, "br", "blue");//other
		var redOwn = make(red, 4, 1, 300, "rr", "red");//own

		var rOsum = d3.sum(redOwn, function(d){ return d.q; });
		var bRsum = d3.sum(blueRed, function(d){ return d.q; });
		var bOsum = d3.sum(blueOwn, function(d){ return d.q; });
		var rBsum = d3.sum(redBlue, function(d){ return d.q; });

		var redMean = (rOsum/(red+blue)) + (bRsum/(red+blue));
		var blueMean = (bOsum/(red+blue)) + (rBsum/(blue+red));

		md.append("text").attrs({class: "md", x: 760, y: 150, stroke:"black"})
			.text("Avg rating of Blue: " + Math.round(blueMean * 100)/100);
		md.append("text").attrs({class: "md", x: 760, y: 300, stroke:"black"})
			.text("Avg rating of Red: " + Math.round(redMean * 100)/100);
	}
	//code for making curves adapted from:
	//http://bl.ocks.org/phil-pedruco/88cb8a51cdce45f13c7e
	function make(n, mu, sigma, y, id, c){
		var data = [];
		var dist = d3.randomNormal(mu, sigma);

		for (var i = 0; i < n; i++) {
				q = dist(); // calc random draw from normal dist
				if(q>max){ max=q; };
				if(q<min){ min=q; };
				p = gaussian(q, mu, sigma) // calc prob of rand draw
				point = { "q": q, "p": p, "y": y}
				data.push(point)
		};
		data.sort(function(x, y) {
				return x.q - y.q;
		});

		xScale.domain([min, max]);
		curveXScale.domain(d3.extent(data, function(d){ return d.q; }));
		yScale.domain(d3.extent(data, function(d) { return d.p; })).range([y, y-120]);

		var line = d3.line()
		  .x(function(d) { return xScale(d.q); })
		  .y(function(d) { return yScale(d.p); });

		md.append("path")
		    .datum(data)
				.attrs({id: "curvepath", class: "md", stroke: c, d: line});

		md.selectAll("circle#" + id).data(data).enter().append("circle")
			.attr("cx", function(d){ return xScale(d.q); })
			.attr("cy", function(d){ return d.y; })
			.attrs({id: id, class: "md", r: 5, fill: c, opacity: 0.2});

		return data;
	}

	// https://github.com/jasondavies/science.js/
	function gaussian(x, mu, sigma) {
		var gaussianConstant = 1 / Math.sqrt(2 * Math.PI);
	  x = (x - mu) / sigma;
	  return gaussianConstant * Math.exp(-.5 * x * x) / sigma;
	};

	updateNums(50, 50);

	xAxis = d3.axisBottom(xScale);
	md.append("g").call(xAxis).attr("transform", "translate(0,320)");

	</script>
	<p>As you can see, an increase in the number of blue raters results in higher ratings for blue users, and vice versa. This is just one example of how bias on platforms can be measured and detected. If we can understand how ratings are distributed for people of different types, we can better construct algorithms that detect and eliminate such bias.</p>
</div> <!--END page3-->

</div> <!--END page-wrap-->

<!-- <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script> -->
<script></script>
</body>
<footer>
	<p> Developed by Jevan Hutson, Jessie Taft, Olivia Wherry, & Tyler Alicea </p>
</footer>
</html>
